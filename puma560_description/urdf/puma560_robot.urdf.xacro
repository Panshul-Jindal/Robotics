<?xml version="1.0"?>
<robot name="Puma560" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:macro name="puma560_link_geometry" params="link_num">
    <mesh filename="package://puma560_description/meshes/puma_link${link_num}.stl" scale="${0.001*25.4} ${25.4*0.001} ${25.4*0.001}"/>
  </xacro:macro>

  <material name="blue">
    <color rgba="0 0 0.8 0.8"/>
  </material>

  <material name="red">
    <color rgba="0.8 0 0 0.8"/>
  </material>

  <material name="green">
    <color rgba="0 0.8 0 0.8"/>
  </material>

  <xacro:property name="M_PI" value="3.14159265"/>

  <!-- DH Paramaters -->
  <xacro:property name="d_1" value="0.6718"/>
  <xacro:property name="d_2" value="0.1501"/>
  <xacro:property name="d_3" value="0"/>
  <xacro:property name="d_4" value="0.4331"/>
  <xacro:property name="d_5" value="0"/>
  <xacro:property name="d_6" value="0.0558"/>

  <xacro:property name="a_1" value="0"/>
  <xacro:property name="a_2" value="0.4318"/>
  <xacro:property name="a_3" value="-0.0203"/>
  <xacro:property name="a_4" value="0"/>
  <xacro:property name="a_5" value="0"/>
  <xacro:property name="a_6" value="0"/>

  <link name="link1">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="1"/>
      </geometry>
      <origin rpy="0 0 ${M_PI/2}"/>
      <material name="green"/>
    </visual>
    <!-- NOTE: Base link is static, so inertial properties are not strictly required for the simulation to run -->
  </link>

  <link name="link2">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="2"/>
      </geometry>
      <origin xyz="0 0 -0.1" rpy="0 0 0"/>
      <material name="red"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="17.0"/> <!-- Approx. mass in kg -->
      <inertia ixx="0.35" ixy="0" ixz="0" iyy="0.35" iyz="0" izz="0.1"/>
    </inertial>
  </link>

  <joint name="j1" type="revolute">
    <parent link="link1"/>
    <child link="link2"/>
    <origin xyz="0 0 ${d_1}" rpy="${M_PI/2} 0 0"/>
    <axis xyz="0 1 0"/>
    <limit effort="1000.0" lower="${-M_PI}" upper="${M_PI}" velocity="0"/>
  </joint>
  
  <link name="link3">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="3"/>
      </geometry>
      <origin xyz="0 0 ${0.0435+d_2}"/>
      <material name="blue"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="5.0"/> <!-- Approx. mass in kg -->
      <inertia ixx="0.1" ixy="0" ixz="0" iyy="0.1" iyz="0" izz="0.05"/>
    </inertial>
  </link>

  <joint name="j2" type="revolute">
    <parent link="link2"/>
    <child link="link3"/>
    <origin xyz="0 0 0" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="${-M_PI/2}" upper="${M_PI/2}" velocity="0"/>
  </joint>

  <link name="link4">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="4"/>
      </geometry>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <material name="green"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="2.0"/> <!-- Approx. mass in kg -->
      <inertia ixx="0.05" ixy="0" ixz="0" iyy="0.05" iyz="0" izz="0.05"/>
    </inertial>
  </link>

  <joint name="j3" type="revolute">
    <parent link="link3"/>
    <child link="link4"/>
    <origin xyz="${a_2} ${a_3} ${d_2}" rpy="0 0 ${-M_PI/2}"/>
    <axis xyz="0 0 1"/>
    <limit effort="1000.0" lower="${-M_PI/2}" upper="${M_PI/2}" velocity="0"/>
  </joint>
  
  <link name="link5">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="5"/>
      </geometry>
      <origin xyz="0 0 ${d_4-0.071}" rpy="0 0 ${M_PI/2}"/>
      <material name="red"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/> <!-- Approx. mass in kg -->
      <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
    </inertial>
  </link> 

  <joint name="j4" type="revolute">
    <parent link="link4"/>
    <child link="link5"/>
    <origin xyz="0 0 0" rpy="${M_PI/2} 0 ${M_PI/2}"/>
    <axis xyz="0 0 1"/> 
    <limit effort="1000.0" lower="${-M_PI/2}" upper="${M_PI/2}" velocity="0"/>
  </joint>

  <link name="link6">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="6"/>
      </geometry>
      <origin xyz="0 0 0" rpy="${M_PI} 0 ${M_PI/2}"/>
      <material name="green"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/> <!-- Approx. mass in kg -->
      <inertia ixx="0.02" ixy="0" ixz="0" iyy="0.02" iyz="0" izz="0.02"/>
    </inertial>
  </link> 

  <joint name="j5" type="revolute">
    <parent link="link5"/>
    <child link="link6"/>
    <origin xyz="0 0 ${d_4}" rpy="${M_PI/2} 0 0"/>
    <axis xyz="0 0 1"/> 
    <limit effort="1000.0" lower="${-M_PI/2}" upper="${M_PI/2}" velocity="0"/>
  </joint>

  <link name="link7">
    <visual>
      <geometry>
        <xacro:puma560_link_geometry link_num="7"/>
      </geometry>
      <origin xyz="0 0 -0.010" rpy="0 0 0"/>
      <material name="blue"/>
    </visual>
    <!-- ADDED FOR PHYSICS SIMULATION -->
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.5"/> <!-- Approx. mass in kg for the end-effector mount -->
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
  </link> 

  <joint name="j6" type="revolute">
    <parent link="link6"/>
    <child link="link7"/>
    <origin xyz="0 ${d_6} 0" rpy="${-M_PI/2} 0 0"/>
    <axis xyz="0 0 1"/> 
    <limit effort="1000.0" lower="${-M_PI/2}" upper="${M_PI/2}" velocity="0"/>
  </joint>



<!-- ... (all your existing link and joint definitions) ... -->

  <!-- ========================================================== -->
  <!-- |           TRANSMISSIONS (ACTUATORS)                    | -->
  <!-- ========================================================== -->
  <!-- These tags tell the simulator that the joints are motorized -->

  <transmission name="tran1">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j1"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

  <transmission name="tran2">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j2"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

  <transmission name="tran3">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j3"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

  <transmission name="tran4">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j4"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

  <transmission name="tran5">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j5"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

  <transmission name="tran6">
    <type>hardware_interface/PositionJointInterface</type>
    <joint name="j6"/>
    <hardwareInterface>hardware_interface/PositionJointInterface</hardwareInterface>
  </transmission>

</robot>


